(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00632c3f"],{"12e8":function(s,t,e){},"662a":function(s,t,e){"use strict";e.r(t);var n=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[s.isLoadingSessions?e("div",[s._v("\n    正在获取课程详情...\n  ")]):e("div",[e("h3",{domProps:{textContent:s._s(s.classInfo.name)}}),e("h4",[s._v("\n      主持人："+s._s(s.classInfo.teachers.join())+" 师兄  \n      "),s.classInfo.url?e("a",{attrs:{href:s.getFullUrl(s.classInfo.url),target:"_blank"}},[s._v("学习资料")]):s._e(),s.classInfo.downloadLink?e("a",{attrs:{href:s.getFullUrl(s.classInfo.downloadLink),target:"_blank"}},[s._v("  课堂材料")]):s._e()]),s.classInfo.selfStudySessions&&s.classInfo.selfStudySessions.length?e("div",[e("b-tabs",{attrs:{pills:"","content-class":"mt-3",align:"center"}},[e("b-tab",{attrs:{title:"正式学修课程","title-item-class":"mytab",acitve:""}},[e("ClassSessionDetails",{attrs:{classSessions:s.classSessions,sessionDetails:s.sessionDetails}})],1),e("b-tab",{attrs:{title:"限制性学修课程","title-item-class":"mytab",acitve:""}},[e("ClassSessionDetails",{attrs:{selfStudy:!0,classSessions:s.classInfo.selfStudySessions,sessionDetails:s.classInfo.selfStudySessionDetails}})],1)],1)],1):e("ClassSessionDetails",{attrs:{classSessions:s.classSessions,sessionDetails:s.sessionDetails}})],1)])},a=[],i=e("2f62"),l=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[s.selfStudy?s._e():e("div",{staticClass:"input-group mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.filterText,expression:"filterText"}],staticClass:"form-control",attrs:{type:"text","aria-describedby":"basic-addon2",placeholder:"搜索"},domProps:{value:s.filterText},on:{change:function(t){return s.filterSessions(s.filterText)},input:function(t){t.target.composing||(s.filterText=t.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:s.clearFilter}},[s._v("\n        清除\n      ")]),s.classInfo.forApplication?e("b-button",{attrs:{variant:"warning"},on:{click:function(t){return s.applyClass()}}},[s._v("我要报名")]):s._e(),s.classInfo.forApplication||!s.isClassAdmin&&!s.isTeachingAssistant?s._e():e("b-button",{attrs:{variant:"warning"},on:{click:s.createSession}},[s._v(s._s(s.creatingSession?"取消创建":"创建新课"))])],1)]),0===s.classSessions.length?e("div",[s._v("\n    没有找到上课记录！\n  ")]):s._e(),s.creatingSession?e("ClassSession",{attrs:{classInfo:s.classInfo,classSession:s.newClassSession}}):s._e(),s._l(s.classSessions,(function(t,n){return e("ClassSession",{key:t.id+n,attrs:{classInfo:s.classInfo,forApplication:s.classInfo.forApplication,forAdmin:s.classInfo.forAdmin,classSession:t,sessionDetails:s.sessionDetails[n],selfStudy:s.selfStudy}})}))],2)},o=[],c=e("2c634"),r=e("db26"),f=e("6c33"),u=e("bf48"),d=e.n(u),p={name:"ClassSessionDetails",components:{ClassSession:c["a"],DownloadReport:r["a"]},props:{classSessions:{type:Array,required:!0},sessionDetails:{type:Array,required:!0},selfStudy:Boolean},computed:{...Object(i["c"])(["classInfo","isClassAdmin","isTeachingAssistant","isStudent"])},data:function(){return{filterText:"",creatingSession:!1,newClassSession:{dummy:!0},newAttendance:{dummy:!0}}},methods:{filterSessions(s){this.$store.dispatch(f["k"],s)},clearFilter(){this.filterText="",this.$store.dispatch(f["k"],this.filterText)},createSession(){this.creatingSession=!this.creatingSession},applyClass(){const s=this.classInfo.id,t={okText:"确认",cancelText:"取消"},e={title:this.classInfo.name,body:"南无阿弥陀佛！真的要报名？"},n=this;console.log("applyClass - classId: "+s),this.$dialog.confirm(e,t).then((function(){d.a.Cloud.run("class:apply",{classId:s}).then(s=>{console.log("class:apply - result: "+JSON.stringify(s)),n.$router.push({name:"home"})}).catch(s=>{console.log("error in class:apply: "+s)})})).catch(s=>{console.log("error: "+s)})}}},S=p,m=e("2877"),h=Object(m["a"])(S,l,o,!1,null,null,null),b=h.exports,g=e("4360"),y={name:"SessionManagement",components:{ClassSessionDetails:b},computed:{...Object(i["c"])(["isLoadingSessions","classInfo","classSessions","sessionDetails","isClassAdmin","isTeachingAssistant","isStudent"])},beforeRouteEnter(s,t,e){g["a"].dispatch(f["g"],s.params).then(()=>{e()})},methods:{getFullUrl(s){if(!s.includes("://")&&0!==s.indexOf("//")){const t="..";if(!s.startsWith(t))return t+s.replace("..","")}return s}}},v=y,_=(e("bd6c"),Object(m["a"])(v,n,a,!1,null,null,null));t["default"]=_.exports},bd6c:function(s,t,e){"use strict";e("12e8")}}]);
//# sourceMappingURL=chunk-00632c3f.f9d55508.js.map